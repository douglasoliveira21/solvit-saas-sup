# SaaS Identity Management Agent - Environment Configuration
# Copy this file to .env and configure the values for your environment

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# Agent Configuration
# Unique identifier for your tenant in the SaaS platform
AGENT_TENANT_ID=your-tenant-id-here

# URL of the SaaS Identity Management backend API
# Example: https://identity.yourcompany.com or https://api.yourcompany.com
AGENT_BACKEND_URL=https://your-backend-url.com

# API key for authenticating with the backend
# This should be generated from the SaaS platform admin panel
AGENT_API_KEY=your-api-key-here

# Active Directory Configuration
# Your Active Directory domain name
# Example: company.local or company.com
AD_DOMAIN_NAME=your-domain.local

# Service account for LDAP operations
# Format: username (without domain) or DOMAIN\username
# Example: svc-saas-sync or COMPANY\svc-saas-sync
AD_SERVICE_ACCOUNT=your-service-account

# Password for the service account
AD_SERVICE_PASSWORD=your-service-account-password

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# Agent Settings
# Unique identifier for this agent instance (auto-generated if not set)
# AGENT_ID=AGENT-SERVER01-20240101-120000

# Deployment environment (Development, Staging, Production)
AGENT_ENVIRONMENT=Production

# How often to send heartbeat to backend (seconds)
AGENT_HEARTBEAT_INTERVAL=60

# How often to perform full synchronization (seconds)
# Development: 300 (5 minutes), Production: 3600 (1 hour)
AGENT_SYNC_INTERVAL=3600

# How often to check for commands from backend (seconds)
AGENT_COMMAND_CHECK_INTERVAL=30

# Maximum retry attempts for failed operations
AGENT_MAX_RETRY_ATTEMPTS=3

# Delay between retry attempts (seconds)
AGENT_RETRY_DELAY=5

# Only sync enabled users (true/false)
AGENT_SYNC_ONLY_ENABLED=true

# Backend Settings
# Request timeout for backend API calls (seconds)
BACKEND_TIMEOUT=30

# Validate SSL certificates for backend connections (true/false)
# Set to false for development with self-signed certificates
BACKEND_VALIDATE_SSL=true

# Proxy configuration (if required)
# BACKEND_PROXY_URL=http://proxy.company.com:8080
# BACKEND_PROXY_USERNAME=proxy-user
# BACKEND_PROXY_PASSWORD=proxy-password

# Active Directory Advanced Settings
# Specific domain controller to connect to (optional)
# AD_DOMAIN_CONTROLLER=dc01.company.local

# Default containers for users and groups
AD_DEFAULT_USER_CONTAINER=CN=Users
AD_DEFAULT_GROUP_CONTAINER=CN=Users

# Use secure LDAP connection (true/false)
AD_USE_SECURE_CONNECTION=true

# LDAP port (389 for non-secure, 636 for secure)
AD_LDAP_PORT=636

# LDAP connection timeout (seconds)
AD_CONNECTION_TIMEOUT=30

# Organizational Units to synchronize (comma-separated)
# Example: OU=Users,DC=company,DC=local;OU=Groups,DC=company,DC=local
# AD_SYNC_OUS=OU=Users,DC=company,DC=local;OU=Groups,DC=company,DC=local

# Organizational Units to exclude from synchronization (comma-separated)
# Example: OU=Service Accounts,DC=company,DC=local;OU=Disabled Users,DC=company,DC=local
# AD_EXCLUDE_OUS=OU=Service Accounts,DC=company,DC=local;OU=Disabled Users,DC=company,DC=local

# =============================================================================
# DEPLOYMENT EXAMPLES
# =============================================================================

# Example for Development Environment:
# AGENT_ENVIRONMENT=Development
# AGENT_SYNC_INTERVAL=300
# BACKEND_VALIDATE_SSL=false
# AGENT_BACKEND_URL=https://localhost:8000

# Example for Production Environment:
# AGENT_ENVIRONMENT=Production
# AGENT_SYNC_INTERVAL=3600
# BACKEND_VALIDATE_SSL=true
# AGENT_BACKEND_URL=https://identity.yourcompany.com

# Example for Large Domain:
# AD_SYNC_OUS=OU=Corporate Users,DC=company,DC=local;OU=IT Department,DC=company,DC=local
# AD_EXCLUDE_OUS=OU=Service Accounts,DC=company,DC=local;OU=Contractors,DC=company,DC=local;OU=Disabled Users,DC=company,DC=local

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 
# 1. Never commit the .env file to version control
# 2. Use strong passwords for service accounts
# 3. Limit service account permissions to read-only LDAP access
# 4. Use secure LDAP connections in production
# 5. Regularly rotate API keys and service account passwords
# 6. Monitor agent logs for security events
# 7. Use network segmentation to limit agent access
#